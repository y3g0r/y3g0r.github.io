<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<!-- Mirrored from nixsrv.com/llthw/ex10 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 11 Apr 2015 09:04:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta name="google-site-verification" content="EhMbcVlAzv46CX6sFCupv3Ad2OXXRoIWIorX0KVy9sY"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>llthw:ex10 - *nix spellbook</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="llthw,ex10"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.php" title="*nix spellbook"/>
<link rel="start" href="../index.html"/>
<link rel="contents" href="ex10decf.html?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../feedc71d.php?mode=list&amp;ns=llthw"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../_export/xhtml/llthw/ex10.html"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../_export/raw/llthw/ex10.txt"/>
<link rel="canonical" href="ex10.html"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css0130.css?t=vector&amp;tseed=2daf37b429a7c4d4acd474cff747868a"/>
<script type="text/javascript">/*<![CDATA[*/var NS='llthw';var JSINFO = {"id":"llthw:ex10","namespace":"llthw"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js15ee.php?tseed=2daf37b429a7c4d4acd474cff747868a"></script>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<link rel="shortcut icon" href="../lib/tpl/vector/static/3rd/dokuwiki/favicon.ico"/>
<link rel="apple-touch-icon" href="../lib/tpl/vector/static/3rd/dokuwiki/apple-touch-icon.png"/>
<script type="text/javascript" charset="utf-8" src="../lib/tpl/vector/user/user.js"></script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/lib/tpl/vector/static/3rd/vector/csshover.htc")}</style><![endif]-->
</head>
<body class="skin-vector">
<div id="page-container">
<div id="page-base" class="noprint"></div>
<div id="head-base" class="noprint"></div>
 
<div id="content">
<a name="top" id="top"></a>
<a name="dokuwiki__top" id="dokuwiki__top"></a>
 
<div id="siteNotice" class="noprint">
<div class="dokuwiki">
<p>
<span style="color:while;font-size:0%;">Thanks for all your error reports, I didn't forget it. I'll cleanup my guide soon. Thanks again!</span>
</p>
</div>
</div>
 
<div id="bodyContent" class="dokuwiki">
 
<h1 class="sectionedit1" id="exercise_10_bashprogram_exit_code_return_status">Exercise 10. Bash: program exit code (return status)</h1>
<div class="level1">
<p>
Let us say that you want to copy a directory. You may do it by typing <strong>cp -vR /old/dir/path /new/dir/path</strong>. After issuing this command you may want to know how did it go. Was the directory copied? Or some error occurred due to the lack of space in destination directory or something else that did go wrong?
</p>
<p>
To understand how it works you must understand how two programs may communicate. Let us start with stating that <strong>bash</strong> is just another program, so generally when you issued aforementioned <strong>cp</strong> command, one program (bash, which is a parent process) called another (cp, which is child process).
</p>
<p>
In Linux there is a standard mechanism for getting information from child process to parent process, and this mechanism is called <a href="http://en.wikipedia.org/wiki/Exit_status" class="urlextern" title="http://en.wikipedia.org/wiki/Exit_status" rel="nofollow">exit status, or return code</a>. By using this mechanism a small number is passed from a child process (or callee, in our case this is <strong>cp</strong>) to a parent process (or caller, which is <strong>bash</strong> in our case) when child process finishes its work. When program encounters no errors during execution it returns zero, 0. If some errors did occur, this code is non-zero. That simple. In Bash this exit code is saved into <strong>?</strong> environment variable, which as you know now can be accessed as <strong>$?</strong>.
</p>
<p>
Let me reiterate what I said once more, now with outlines:
</p>
<pre class="code">
Bash waits for you input
Bash parses your input
Bash starts a program for you and waits for this program to exit
    Program starts
    Program does what you told it
    Program generates the exit code
    Program exits and returns this exit code to Bash
Bash sets this exit code to the variable ?</pre>
<p>
Now you will learn how to print out program exit status.
</p>
</div>
<h2 class="sectionedit2" id="do_this">Do this</h2>
<div class="level2">
<pre class="code">
<span class="lno">1:</span> ls
<span class="lno">2:</span> echo $?
<span class="lno">3:</span> ls /no/such/dir
<span class="lno">4:</span> echo $?
</pre>
</div>
<h1 class="sectionedit3" id="what_you_should_see">What you should see</h1>
<div class="level1">
<pre class="bash code bash"><span class="co4">user1@vm1:~$ </span><span class="kw2">ls</span>
hello.txt  ls.out
<span class="co4">user1@vm1:~$ </span><span class="kw3">echo</span> <span class="re4">$?</span>
<span class="nu0">0</span>
<span class="co4">user1@vm1:~$ </span><span class="kw2">ls</span> <span class="sy0">/</span>no<span class="sy0">/</span>such<span class="sy0">/</span><span class="kw2">dir</span>
ls: cannot access <span class="sy0">/</span>no<span class="sy0">/</span>such<span class="sy0">/</span>dir: No such <span class="kw2">file</span> or directory
<span class="co4">user1@vm1:~$ </span><span class="kw3">echo</span> <span class="re4">$?</span>
<span class="nu0">2</span>
<span class="co4">user1@vm1:~$</span></pre>
</div>
<h2 class="sectionedit4" id="explanation">Explanation</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Prints out a directory, successfully.</div>
</li>
<li class="level1"><div class="li"> Prints out <strong>ls</strong> exit code, this is <strong>0</strong> which means that <strong>ls</strong> encountered no errors.</div>
</li>
<li class="level1"><div class="li"> Tries to print out nonexistent directory, failing in the process of course.</div>
</li>
<li class="level1"><div class="li"> Prints out <strong>ls /no/such/dir</strong> exit code, which is indeed non-zero.</div>
</li>
</ol>
</div>
<h1 class="sectionedit5" id="extra_credit">Extra credit</h1>
<div class="level1">
<ol>
<li class="level1"><div class="li"> Read <em>Exit status</em> section of <strong>man ls</strong>.</div>
</li>
</ol>
</div>
<h2>Discussion</h2><script charset="utf-8" type="text/javascript">
                    <!--//--><![CDATA[//><!--
var disqus_url     = 'ex10.html';
var disqus_title   = 'Exercise 10. Bash: program exit code (return status)';
var disqus_message = '';
var disqus_container_id = 'disqus__thread';
                    //--><!]]>
                    </script><div id="disqus__thread"></div><script type="text/javascript" src="https://disqus.com/forums/nixsrv/embed.js"></script><noscript><a href="http://nixsrv.disqus.com/?url=ref">View the discussion thread.</a></noscript>  
<div class="clearer"></div>
</div>
 
</div>
 
 
<div id="head" class="noprint">
<div id="p-personal">
<ul>
</ul>
</div>
 
<div id="left-navigation">
<div id="p-namespaces" class="vectorTabs">
<ul>
<li id="ca-nstab-main" class="selected"><a href="ex10.html"><span>Article</span></a></li>
</ul>
</div>
</div>
 
 
<div id="right-navigation">
<div id="p-views" class="vectorTabs">
<ul>
<li id="ca-view" class="selected"><a href="ex10.html"><span>Read</span></a></li>
</ul>
</div>
<div id="p-search">
<h5>
<label for="qsearch__in">Search</label>
</h5>
<form action="https://nixsrv.com/start" accept-charset="utf-8" id="dw__search" name="dw__search">
<input type="hidden" name="do" value="search"/>
<div id="simpleSearch">
<input id="qsearch__in" name="id" type="text" accesskey="f" value=""/>
<button id="searchButton" type="submit" name="button" title="Search for this text">&nbsp;</button>
</div>
<div id="qsearch__out" class="ajax_qsearch JSpopup"></div>
</form>
</div>
</div>
 
</div>
 
 
<div id="panel" class="noprint">
 
<div id="p-logo">
<a href="../start.html" style="background-image:url(../lib/tpl/vector/static/3rd/dokuwiki/logo.png);" accesskey="h" title="[ALT+H]"></a>
</div>
 
<div id="p-navigation" class="portal">
<h5>Navigation</h5>
<div class="body">
<div class="dokuwiki">
<p>
<strong>Learn Linux The Hard Way</strong>
</p>
<ul>
<li class="level1"><div class="li"> <span class="curid"><a href="../llthw.html" class="wikilink1" title="llthw">Introduction</a></span></div>
</li>
</ul>
<p>
<br>
<br>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
</p>
</div>
</div>
</div>
</div>
 
</div>
 
 
<div id="footer">
<ul id="footer-info">
<li id="footer-info-lastmod">
<bdi>llthw/ex10.txt</bdi> · Last modified: 2012/07/05 10:06 by <bdi>sistemshik</bdi><br/>
</li>
<li id="footer-info-copyright">
<div class="dokuwiki"><div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license" class="urlextern">CC Attribution-Share Alike 3.0 Unported</a></bdi></div></div>
</li>
</ul>
<ul id="footer-places" class="noprint">
<li> </li>
</ul>
<div style="clearer"></div>
</div>
 
<img src="../lib/exe/indexer33c7.gif?id=llthw%3Aex10&amp;1428742716" width="2" height="1" alt=""/>
</body>

<!-- Mirrored from nixsrv.com/llthw/ex10 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 11 Apr 2015 09:04:09 GMT -->
</html>
