<?xml version="1.0" encoding="utf-8"?>
<!-- generator="FeedCreator 1.7.2-ppt DokuWiki" -->
<?xml-stylesheet href="https://nixsrv.com/lib/exe/css.php?s=feed" type="text/css"?>
<rdf:RDF
    xmlns="http://purl.org/rss/1.0/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
    xmlns:dc="http://purl.org/dc/elements/1.1/">
    <channel rdf:about="https://nixsrv.com/feed.php">
        <title>*nix spellbook doc</title>
        <description></description>
        <link>https://nixsrv.com/</link>
        <image rdf:resource="https://nixsrv.com/lib/tpl/vector/images/favicon.ico" />
       <dc:date>2015-04-11T09:05:42+00:00</dc:date>
        <items>
            <rdf:Seq>
                <rdf:li rdf:resource="https://nixsrv.com/doc/apparmor?rev=1426446691&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/aptitude?rev=1338543678&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/arp?rev=1345662088&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/awk?rev=1426446946&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/chef?rev=1426444165&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/chef_ruby?rev=1426443962&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/cryptsetup_luks?rev=1415047635&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/diskless_ubuntu?rev=1426445220&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/drbd?rev=1415015816&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/emacs_config?rev=1426445834&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/email_notify_login?rev=1426444968&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/git?rev=1426445774&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/gmail_monospaced_font?rev=1426445543&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/grub?rev=1338540919&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/gvim?rev=1415017295&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/iptables?rev=1415017506&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/irssi?rev=1426446870&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/jails?rev=1338541512&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/kvm?rev=1340127322&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/lbdbq?rev=1338903468&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/luks?rev=1415017223&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/lxc?rev=1426444682&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/mdadm?rev=1415017571&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/mount?rev=1339658157&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/ocfs2?rev=1338543998&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/openldap?rev=1339656834&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/openvpn?rev=1426445496&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/postgresql?rev=1339223290&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/rt_installation?rev=1415017393&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/selinux?rev=1426444831&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/sendmail?rev=1339656647&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/server_interaction?rev=1338545148&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/snoopylogger?rev=1339658329&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/sqlite?rev=1426445328&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/srv_doc_template?rev=1415042348&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/srv_monitoring_example?rev=1415041067&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/srv_proxmox?rev=1415165445&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/ssh?rev=1338542433&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/sysdig_auditd?rev=1415052993&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/thunderbird?rev=1340269653&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/vimrc?rev=1426445103&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/wordpress_update_via_ssh?rev=1415047257&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/xvfb?rev=1339659201&amp;do=diff"/>
                <rdf:li rdf:resource="https://nixsrv.com/doc/zabbix?rev=1426445658&amp;do=diff"/>
            </rdf:Seq>
        </items>
    </channel>
    <image rdf:about="https://nixsrv.com/lib/tpl/vector/images/favicon.ico">
        <title>*nix spellbook</title>
        <link>https://nixsrv.com/</link>
        <url>https://nixsrv.com/lib/tpl/vector/images/favicon.ico</url>
    </image>
    <item rdf:about="https://nixsrv.com/doc/apparmor?rev=1426446691&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T19:11:31+00:00</dc:date>
        <title>doc:apparmor</title>
        <link>https://nixsrv.com/doc/apparmor?rev=1426446691&amp;do=diff</link>
        <description>AppArmor cheatsheet

#chetsheet
    aa-status
    aa-disable /etc/apparmor.d/
    aa-enforce /etc/apparmor.d/
    aa-genprof /opt/google/chrome/google-chrome
    service apparmor restart
#google chrome
    https://launchpad.net/~apparmor-dev/+archive/ubuntu/apparmor-devel
    #TODO:
        #create google-chrome profile and sysdig it
        #write manual profile
        #do the same with other chrome components
    opt.google.chrome.google-chrome
    opt.google.chrome.nacl_helper_bootstrap
    …</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/aptitude?rev=1338543678&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-01T09:41:18+00:00</dc:date>
        <title>doc:aptitude</title>
        <link>https://nixsrv.com/doc/aptitude?rev=1338543678&amp;do=diff</link>
        <description>Cheat-sheet for debian package manager aptitude

Aptitude is a package manager for Debian and Debian-based systems.

Cheatsheet

# dpkg
    aptitude
    dpkg-deb
# dpkg
    dpkg --list
    dpkg --status packagename
    dpkg --listfiles foo
    dpkg --search filename
    dpkg-divert --divert /bin/login.debian /bin/login
    dpkg-scanpackages BIN_DIR OVERRIDE_FILE [PATHPREFIX] &gt; my_Packages
    dlocate -S filename
    apt-file search foo
# apt-proxy
# search
    aptitude search '?narrow(?installed…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/arp?rev=1345662088&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-08-22T19:01:28+00:00</dc:date>
        <title>doc:arp</title>
        <link>https://nixsrv.com/doc/arp?rev=1345662088&amp;do=diff</link>
        <description>If several interfaces look into the same subnet, Linux will answer to all ARP requests with only one MAC address. To solve this:

net.ipv4.conf.all.arp_ignore=1
net.ipv4.conf.all.arp_announce=2

Ugh, seems that it does not actually work.</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/awk?rev=1426446946&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T19:15:46+00:00</dc:date>
        <title>doc:awk</title>
        <link>https://nixsrv.com/doc/awk?rev=1426446946&amp;do=diff</link>
        <description>Awk

ps -C chrome -eo time,pid,comm | awk '{split($0,a,&quot;:&quot;);  t+=a[1]*3600+a[2]*60+a[3]; print $1 $2} END {print t}'</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/chef?rev=1426444165&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:29:25+00:00</dc:date>
        <title>doc:chef</title>
        <link>https://nixsrv.com/doc/chef?rev=1426444165&amp;do=diff</link>
        <description>Chef cheatsheet

Chef overview

#resources
    A resource is a statement of configuration policy that:
        Describes the desired state for an item
        Declares the steps needed to bring that item to the desired state
        Specifies a resource type—such as package, template, or service
        Lists additional details (also known as attributes), if necessary
        Tells the chef-client which action to take
    Resources are grouped into recipes, which describe working configurations.…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/chef_ruby?rev=1426443962&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:26:02+00:00</dc:date>
        <title>doc:chef_ruby</title>
        <link>https://nixsrv.com/doc/chef_ruby?rev=1426443962&amp;do=diff</link>
        <description>#check syntax
    ruby -c my_cookbook_file.rb
# This is a comment.
#logic
    !!true          # =&gt; true
    !!false         # =&gt; false
    !!nil           # =&gt; false (when pressed, nil is false)
    !!0             # =&gt; true (zero is NOT false).
#arrays
    x = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]   # =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
    x[0]                  # =&gt; &quot;a&quot; (zero is the first index)
    x.first               # =&gt; &quot;a&quot; (see?)
    x.last                # =&gt; &quot;c&quot;
    x + [&quot;d&quot;]             # =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]
    x    …</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/cryptsetup_luks?rev=1415047635&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T20:47:15+00:00</dc:date>
        <title>doc:cryptsetup_luks</title>
        <link>https://nixsrv.com/doc/cryptsetup_luks?rev=1415047635&amp;do=diff</link>
        <description>Cheatsheet

#create containers
    cryptsetup luksFormat /dev/md4 -c aes-xts-plain64:sha256 -s 512
    cryptsetup luksOpen /dev/md4 srv
    mkfs.ext4 /dev/mapper/srv
#manage containers
    cryptsetup luksOpen /dev/md4 srv
    cryptsetup luksClose srv
#manage keys
    cryptsetup luksDump /dev/md4
    cryptsetup luksAddKey /dev/md4 -S 3
    cryptsetup luksKillSlot /dev/md4 2
#mount scipts
    #TODO: add repo link</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/diskless_ubuntu?rev=1426445220&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:47:00+00:00</dc:date>
        <title>doc:diskless_ubuntu</title>
        <link>https://nixsrv.com/doc/diskless_ubuntu?rev=1426445220&amp;do=diff</link>
        <description>Diskless worstations on Ubuntu 14.04 howto

@test_setup
    network: 10.1.1.0/24
    server
        ip a s | grep inet
            inet 10.1.1.2/24 brd 10.1.1.255 scope global eth1
        cat /etc/lsb-release  | grep DESC
            DISTRIB_DESCRIPTION=&quot;Ubuntu 12.04.5 LTS&quot;
    client
        cat /etc/lsb-release | grep DESC
            DISTRIB_DESCRIPTION=&quot;Ubuntu 14.04.1 LTS&quot;
        ip a s | grep inet
            inet 10.1.1.2/24 brd 10.1.1.255 scope global eth1
@server
    @required_packages…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/drbd?rev=1415015816&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T11:56:56+00:00</dc:date>
        <title>doc:drbd</title>
        <link>https://nixsrv.com/doc/drbd?rev=1415015816&amp;do=diff</link>
        <description>DRDB cheat-sheet

# Create resource
    drbdadm create-md r0
# Attach resource
    drbdadm attach r0
# Connect resource
    drbdadm connect r0
# Set sync speed in MB
    drbdsetup /dev/drbd1 syncer -r 5M
# Initialize/re-synchronize
    drbdadm -- --overwrite-data-of-peer primary r0
# Bring resource up
    drbdadm up r0
# Bring resource down
    drbdadm down r0
# Get status
    cat /proc/drbd</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/emacs_config?rev=1426445834&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:57:14+00:00</dc:date>
        <title>doc:emacs_config</title>
        <link>https://nixsrv.com/doc/emacs_config?rev=1426445834&amp;do=diff</link>
        <description>vim .emacs
    (add-to-list 'load-path &quot;~/.emacs.d/undo-tree&quot;)
    (require 'undo-tree)
    (global-undo-tree-mode)

    (add-to-list 'load-path &quot;~/.emacs.d/evil&quot;)
    (require 'evil)
    (evil-mode 1)

    (custom-set-variables
     '(custom-enabled-themes (quote (dichromacy)))
     '(font-use-system-font t)
     '(show-paren-mode t))
    (custom-set-faces
     '(default ((t (:family &quot;Terminus (TTF)&quot; :foundry &quot;unknown&quot; :slant normal :weight normal :height 120 :width normal)))))

    (add-to-lis…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/email_notify_login?rev=1426444968&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:42:48+00:00</dc:date>
        <title>doc:email_notify_login</title>
        <link>https://nixsrv.com/doc/email_notify_login?rev=1426444968&amp;do=diff</link>
        <description>Email notification about all sucessful logins using rsyslog

#send all login attemps to email
#set up postfix to send encrypted email
    vim /etc/postfix/main.cf
        #setup tls encryption
        smtp_tls_security_level = encrypt
        smtp_use_tls = yes
        smtp_tls_policy_maps = hash:/etc/postfix/tls_policy
    vim /etc/postfix/tls_policy
        google.com encrypt
        .google.com encrypt
        gmail.com encrypt
        .gmail.com encrypt
    postmap tls_policy
    service pos…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/git?rev=1426445774&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:56:14+00:00</dc:date>
        <title>doc:git</title>
        <link>https://nixsrv.com/doc/git?rev=1426445774&amp;do=diff</link>
        <description>Git

    git log #show revisions
    git diff master~1:./sshd_config ./sshd_config #diff with last revision
    git log -p -1 filename #diff within git
    git diff stash@{0} master
    git show --name-only 18868173c
    git log -Spassword
    git diff-tree --no-commit-id --name-only -r bd61ad98
    git show --pretty=&quot;format:&quot; --name-only bd61ad98
    git diff HEAD^^..HEAD -- main.c</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/gmail_monospaced_font?rev=1426445543&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:52:23+00:00</dc:date>
        <title>doc:gmail_monospaced_font</title>
        <link>https://nixsrv.com/doc/gmail_monospaced_font?rev=1426445543&amp;do=diff</link>
        <description># install sylish
    # css style:
        .ii, textarea {
        font-family: &quot;Terminus (TTF)&quot; !important;
        font-size: 12px !important;
        line-height: 1.1 !important;
    }

    .editable {
        font-family: &quot;Terminus (TTF)&quot; !important;
        font-size: 12px !important;
        line-height: 1.1 !important;
    }

    div
        {
            font-family: &quot;Terminus (TTF)&quot; !important;
            font-size: 12px !important;
        }

        textarea.dV
        {
            f…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/grub?rev=1338540919&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-01T08:55:19+00:00</dc:date>
        <title>doc:grub</title>
        <link>https://nixsrv.com/doc/grub?rev=1338540919&amp;do=diff</link>
        <description>GRand Unified Bootloader

Tips and config examples.

Recue shell

#Inspect the current prefix (and other preset variables):
    set
# Set to the correct value, which might be something like this:
    set prefix=(hd0,1)/grub
    set root=(hd0,1)
    insmod normal
    normal</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/gvim?rev=1415017295&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T12:21:35+00:00</dc:date>
        <title>doc:gvim</title>
        <link>https://nixsrv.com/doc/gvim?rev=1415017295&amp;do=diff</link>
        <description>Setting up gvim it's all text and russian locale

#new .givmrc
set nocp
syntax enable
set expandtab
set tabstop=4
set shiftwidth=4
colorscheme github
set autoindent
set go=
set guifont=DejaVu\ Sans\ Mono\ 8
set incsearch
set guioptions+=a
set foldlevel=1
set foldnestmax=1
set foldmethod=indent
set foldminlines=0
set foldigonre=

#windows .gvimrc
set guifont=Monospace\ 12
set nocp
set nu!
set t_Co=256
set langmap=ёйцукенгшщзхъфывапролджэячсмитьбюЁЙЦУКЕHГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮ;`qwertyuiop[]asdf…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/iptables?rev=1415017506&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T12:25:06+00:00</dc:date>
        <title>doc:iptables</title>
        <link>https://nixsrv.com/doc/iptables?rev=1415017506&amp;do=diff</link>
        <description>/etc/iptables.up.rules
    # Generated by iptables-save v1.4.21 on Wed Aug  6 22:55:18 2014
    *nat
    :PREROUTING ACCEPT [0:0]
    :INPUT ACCEPT [0:0]
    :OUTPUT ACCEPT [0:0]
    :POSTROUTING ACCEPT [0:0]
    #https to zabbix-server
    -A PREROUTING -i em1 -p tcp -m tcp --dport 8443 -j DNAT --to 10.10.0.13:443
    -A POSTROUTING -d 10.10.0.13 -p tcp --dport 443 -j SNAT --to-source 1.1.1.1
    -A POSTROUTING -o em1 -j MASQUERADE
    COMMIT
    # Completed on Wed Aug  6 22:55:18 2014
    # Ge…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/irssi?rev=1426446870&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T19:14:30+00:00</dc:date>
        <title>doc:irssi</title>
        <link>https://nixsrv.com/doc/irssi?rev=1426446870&amp;do=diff</link>
        <description>irssi irc client

irssi cheatsheet

/ignore -channels #mwsf * JOINS PARTS QUITS NICKS

.irrssi

settings = {
  core = {
    real_name = &quot;Unknown&quot;;
    user_name = &quot;name&quot;;
    nick = &quot;nick&quot;;
  };
  &quot;fe-text&quot; = { actlist_sort = &quot;refnum&quot;; };
  &quot;perl/core/scripts&quot; = {
    awl_columns = &quot;1&quot;;
    awl_placement = &quot;top&quot;;
    awl_height_adjust = &quot;4&quot;;
    awl_display_key_active = &quot;$Q%K|$N%n $H%U$C%n$S&quot;;
  };
  &quot;fe-common/core&quot; = {
    activity_hide_level = &quot;parts joins quits nicks modes&quot;;
  };
};
statusba…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/jails?rev=1338541512&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-01T09:05:12+00:00</dc:date>
        <title>doc:jails</title>
        <link>https://nixsrv.com/doc/jails?rev=1338541512&amp;do=diff</link>
        <description>Jails

OS-level virtualization in FreeBSD.

Cheatsheet

# Create a jail
    setenv D /here/is/the/jail
    mkdir -p $D
    cd /usr/src
    make buildworld
    make installworld DESTDIR=$D
    make distribution DESTDIR=$D
    mount -t devfs devfs $D/dev

# Start jails on boot, /etc/rc.conf
    jail_enable=&quot;YES&quot;   # Set to NO to disable starting of any jails
    jail_list=&quot;www&quot;     # Space separated list of names of jails
# Jails configuration, /etc/rc.conf
    jail_www_rootdir=&quot;/usr/jail/www&quot;    …</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/kvm?rev=1340127322&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-19T17:35:22+00:00</dc:date>
        <title>doc:kvm</title>
        <link>https://nixsrv.com/doc/kvm?rev=1340127322&amp;do=diff</link>
        <description>KVM

Quickly create a virtual machine with host-only network and access to the Internet via iptables

# Add a tun interface
    tunctl -t tap0 -u root
# Add a bridge
    brctl addbr br0
    brctl addif br0 tap0
    ip a a 10.0.0.1/24 brd + dev br0
# Create disk image
    qemu-img create -f qcow2 winxp.img 3G
# Install an OS
    kvm -m 4096 -vnc '127.0.0.1:1' -cdrom /home/winxp.iso -boot d win2008r2 -net nic,vlan=1,macaddr=00:aa:00:60:00:01,model=e1000 -net tap,vlan=1,ifname=tap0,script=no
# Laun…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/lbdbq?rev=1338903468&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-05T13:37:48+00:00</dc:date>
        <title>doc:lbdbq</title>
        <link>https://nixsrv.com/doc/lbdbq?rev=1338903468&amp;do=diff</link>
        <description>lbdbq

/usr/lib/lbdb/m_ldap
    $libdir/mutt_ldap_query --lbdb_output &quot;$@&quot; || :</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/luks?rev=1415017223&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T12:20:23+00:00</dc:date>
        <title>doc:luks</title>
        <link>https://nixsrv.com/doc/luks?rev=1415017223&amp;do=diff</link>
        <description>@CRYPTSETUP_LUKS
    create containers
        cryptsetup luksFormat /dev/md4 -c aes-xts-plain64:sha256 -s 512
        cryptsetup luksOpen /dev/md4 srv
        mkfs.ext4 /dev/mapper/srv
    manage containers
        cryptsetup luksOpen /dev/md4 srv
        cryptsetup luksClose srv
    manage keys
        cryptsetup luksDump /dev/md4
        cryptsetup luksAddKey /dev/md4 -S 3
        cryptsetup luksKillSlot /dev/md4 2
    mount scipts
        #TODO: add repo link</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/lxc?rev=1426444682&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:38:02+00:00</dc:date>
        <title>doc:lxc</title>
        <link>https://nixsrv.com/doc/lxc?rev=1426444682&amp;do=diff</link>
        <description>Cheatsheet

#install under normal user
    sudo aptitude install lxc
    mkdir -p ~/.config/lxc
    echo &quot;lxc.id_map = u 0 100000 65536&quot; &gt; ~/.config/lxc/default.conf
    echo &quot;lxc.id_map = g 0 100000 65536&quot; &gt;&gt; ~/.config/lxc/default.conf
    echo &quot;lxc.network.type = veth&quot; &gt;&gt; ~/.config/lxc/default.conf
    echo &quot;lxc.network.link = lxcbr0&quot; &gt;&gt; ~/.config/lxc/default.conf
    echo &quot;$USER veth lxcbr0 2&quot; | sudo tee -a /etc/lxc/lxc-usernet
#usage
    lxc-create --template download --name test1 -- --list
…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/mdadm?rev=1415017571&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T12:26:11+00:00</dc:date>
        <title>doc:mdadm</title>
        <link>https://nixsrv.com/doc/mdadm?rev=1415017571&amp;do=diff</link>
        <description>create raid
    parted /dev/sdb
        mkpart srv ext2 34.9GB 1035GB
        mkpart bak ext2 1035GB 3001GB
    mdadm --create /dev/md5 --level=1 --raid-devices=2 /dev/sdb5 /dev/sdc5
    mdadm --create /dev/md6 --level=1 --raid-devices=2 /dev/sdb6 /dev/sdc6
    #repeat for sdc
make raid autostart
    mdadm --examine --scan
    vim /etc/mdadm/mdadm.conf
        ARRAY /dev/md/5 metadata=1.2 UUID=187d0aa0:d170df31:9c35a68f:75b2ac95 name=vbox:5
        ARRAY /dev/md/6 metadata=1.2 UUID=e1f810c6:98e1…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/mount?rev=1339658157&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-14T07:15:57+00:00</dc:date>
        <title>doc:mount</title>
        <link>https://nixsrv.com/doc/mount?rev=1339658157&amp;do=diff</link>
        <description>mount

# mount a partition or file which contain a partition table using loop device
     fdisk -lu /dev/sda12 # remember offset of a partition you want
     losetup /dev/loop1 /dev/sda12 -o $((206848 * 512)) # add loop device
     mount.ntfs-3g /dev/loop1 /mnt # mount it</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/ocfs2?rev=1338543998&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-01T09:46:38+00:00</dc:date>
        <title>doc:ocfs2</title>
        <link>https://nixsrv.com/doc/ocfs2?rev=1338543998&amp;do=diff</link>
        <description>Oracle Cluster File System 2

Cheatsheet

# start
    /etc/init.d/o2cb start
# status
    /etc/init.d/o2cb status
# create fs
    mkfs.ocfs2 /dev/drbd1
# mount fs
    mount.ocfs2 /dev/drbd1 /mnt

Skeleton config for simplest cluster

# /etc/ocfs2/cluster.conf
    node:
        ip_port = 7777
        ip_address = 10.0.0.1
        number = 0
        name = foo
        cluster = ocfs2

    node:
        ip_port = 7777
        ip_address = 10.0.0.2
        number = 1
        name = bar
        clust…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/openldap?rev=1339656834&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-14T06:53:54+00:00</dc:date>
        <title>doc:openldap</title>
        <link>https://nixsrv.com/doc/openldap?rev=1339656834&amp;do=diff</link>
        <description>OpenLDAP

ldapsearch -x -L -H ldaps://ldap.site:636/ uid=foo    # check if ldap works

/etc/ldap/ldap.conf

BASE            dc=site,dc=domain
URI             ldap://ldap.site.domain
TLS_REQCERT     allow</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/openvpn?rev=1426445496&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:51:36+00:00</dc:date>
        <title>doc:openvpn</title>
        <link>https://nixsrv.com/doc/openvpn?rev=1426445496&amp;do=diff</link>
        <description>OpenVPN configuration examples

@OPENVPN
    server.conf
        ;local a.b.c.d
        port 1194
        ;proto tcp
        proto udp
        ;dev tap
        dev tun-openvpn
        dev-type tun
        ;dev-node MyTap
        ca ca.crt
        cert openvpn-server.crt
        key openvpn-server.key
        dh dh2048.pem
        server 10.13.0.0 255.255.255.0
        ifconfig-pool-persist ipp.txt
        ;server-bridge 10.8.0.4 255.255.255.0 10.8.0.50 10.8.0.100
        ;server-bridge
        p…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/postgresql?rev=1339223290&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-09T06:28:10+00:00</dc:date>
        <title>doc:postgresql</title>
        <link>https://nixsrv.com/doc/postgresql?rev=1339223290&amp;do=diff</link>
        <description>PostgreSQL

Create new DB with russian locale

root&gt; mkdir /data/dir
root&gt; chmod 0700 /data/dir
postgres$ su -l postgres
postgres$ export LANG=ru_RU.UTF-8
postgres$ locale
postgres$ initdb -E UTF8 -D /data/dir
postgres$ exit
root&gt; psql -U postgres
postgres=&gt; create role foo superuser login;
postgres=&gt; \du</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/rt_installation?rev=1415017393&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T12:23:13+00:00</dc:date>
        <title>doc:rt_installation</title>
        <link>https://nixsrv.com/doc/rt_installation?rev=1415017393&amp;do=diff</link>
        <description>@required_packages
    aptitude install rt4-apache libapache2-mod-fastcgi request-tracker4 rt4-db-sqlit libfcgi-perl
#configure apache2 with ssl and basic auth
    a2enmod ssl
    a2enmod rewrite
    a2enmod fastcgi
    grep -Ev '^$|^\s*#' /etc/apache2/sites-enabled/
        &lt;IfModule mod_ssl.c&gt;
        &lt;VirtualHost _default_:443&gt;
                AddDefaultCharset UTF-8
                ServerAdmin webmaster@localhost
                DocumentRoot /var/www
                &lt;Location /&gt;
            …</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/selinux?rev=1426444831&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:40:31+00:00</dc:date>
        <title>doc:selinux</title>
        <link>https://nixsrv.com/doc/selinux?rev=1426444831&amp;do=diff</link>
        <description>Basic rule setup

    getenforce
    setenforce
    #naive policy generation
        cd /etc/selinux/targeted/modules/active
        audit2allow -M php-fpm &lt; /var/log/audit/audit.log
        semodule -i php-fpm.pp
    ps -Z
    ls -Z
    chcon -v --type=httpd_sys_content_t /var/www
    chcon -v --type=httpd_sys_content_t /var/www/test.php
    cd /etc/selinux/targeted/modules/active
        mkdir custom
        audit2allow -M php-fpm &lt; /var/log/audit/audit.log
        vim php-fpm.te
        check…</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/sendmail?rev=1339656647&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-14T06:50:47+00:00</dc:date>
        <title>doc:sendmail</title>
        <link>https://nixsrv.com/doc/sendmail?rev=1339656647&amp;do=diff</link>
        <description>Sendmail

# update sendmail aliases
    vim /etc/aliases
    less /var/log/maillog
    cd /etc/mail
    make -n
    sendmail -bv root
    make
    sendmail -bv root</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/server_interaction?rev=1338545148&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-01T10:05:48+00:00</dc:date>
        <title>doc:server_interaction</title>
        <link>https://nixsrv.com/doc/server_interaction?rev=1338545148&amp;do=diff</link>
        <description>Server interactions page template

Use this template, for me it proved to be a great help in diagnosing problems involving server interactions.

Format is simple: for every server involved create a header and under this header write down all the external connections this server makes.</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/snoopylogger?rev=1339658329&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-14T07:18:49+00:00</dc:date>
        <title>doc:snoopylogger</title>
        <link>https://nixsrv.com/doc/snoopylogger?rev=1339658329&amp;do=diff</link>
        <description>snoopylogger

Handy tool which allows to log all executed commands. &lt;http://sourceforge.net/projects/snoopylogger/&gt;

Install under debian
    ./configure &amp;&amp; make # don't do make install, it may break aptitude
    configure to write in auth.log</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/sqlite?rev=1426445328&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:48:48+00:00</dc:date>
        <title>doc:sqlite</title>
        <link>https://nixsrv.com/doc/sqlite?rev=1426445328&amp;do=diff</link>
        <description>sqlite cheatsheet

create table movies
      (name, reviews, rating, dvds, earnings, boxoffice, date, month);
.separator ,
.import movies.csv movies
select distinct count(*) from movies;
select distinct * from movies order by rating;
select distinct * from movies where month = 'Jan';  -- then Feb, etc.
select distinct avg(reviews) from movies;
select distinct sum(earnings) from movies order by earnings desc limit 20;</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/srv_doc_template?rev=1415042348&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T19:19:08+00:00</dc:date>
        <title>doc:srv_doc_template</title>
        <link>https://nixsrv.com/doc/srv_doc_template?rev=1415042348&amp;do=diff</link>
        <description>Documentation example

#General configuration description
    #running services
        tcp 0.0.0.0:22          1672/sshd                   # ssh server, server access and file transfer
        tcp 127.0.0.1:25        8965/master                 # postfix mail server, sends mail from Google Apps
        tcp 0.0.0.0:80          17314/nginx: master         # nginx http, redirects everything to https
        tcp 0.0.0.0:443         17314/nginx: master         # nginx webserver and cache, https
    …</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/srv_monitoring_example?rev=1415041067&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T18:57:47+00:00</dc:date>
        <title>doc:srv_monitoring_example</title>
        <link>https://nixsrv.com/doc/srv_monitoring_example?rev=1415041067&amp;do=diff</link>
        <description>Monitoring example</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/srv_proxmox?rev=1415165445&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-05T05:30:45+00:00</dc:date>
        <title>doc:srv_proxmox</title>
        <link>https://nixsrv.com/doc/srv_proxmox?rev=1415165445&amp;do=diff</link>
        <description>#General configuration description
    # network configuraion
        # notice that sophos_firewall gw is NOT a mistake
        # that's because ovh tells to use this config
                         ~~~~~ internet ~~~~~
                        /                    \
                       /                      \
          gw:169.254.10.254/24             gw:169.254.10.254/24(!!!)
                 /                           /
            vmbr0:169.254.10.44/24----eth0:169.254.9.8/24
           …</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/ssh?rev=1338542433&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-01T09:20:33+00:00</dc:date>
        <title>doc:ssh</title>
        <link>https://nixsrv.com/doc/ssh?rev=1338542433&amp;do=diff</link>
        <description>Secures Shell

Cheat-sheet and config examples.

Cheat-sheet

# Map remote port 10060 of foo.site to local 10050 port, can be abbreviated
ssh -L 127.0.0.1:10060:localhost:10050 foo.site
ssh -L 10060:localhost:10050 foo.site

# Map local port 22 to 2200 port of foo.site, can be abbreviated
ssh -R localhost:2200:localhost:22 foo.site
ssh -R 2200:localhost:22 foo.site

# Forward 2200 port of bar.site to 22 port of foo.side
ssh -R localhost:2200:foo.site:22 bar.site</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/sysdig_auditd?rev=1415052993&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T22:16:33+00:00</dc:date>
        <title>doc:sysdig_auditd</title>
        <link>https://nixsrv.com/doc/sysdig_auditd?rev=1415052993&amp;do=diff</link>
        <description>sysdig, auditd cheatsheet

auditd -fn | grep -v foo
auditctl -a task,always
auditctl -a exit,always -S execv
auditctl -d exclude,always -F msgtype=syscall
sysdig fd.name contains /home
sysdig proc.name=konsole and evt.type=open
sysdig -c topprocs_net
sysdig -s2000 -X -c echo_fds fd.cip=8.8.8.8
sysdig -c fdcount_by fd.sport &quot;evt.type=accept&quot;
sysdig -c fdbytes_by fd.sport
sysdig -c topprocs_file
sysdig -c fdcount_by proc.name &quot;fd.type=file&quot;</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/thunderbird?rev=1340269653&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-21T09:07:33+00:00</dc:date>
        <title>doc:thunderbird</title>
        <link>https://nixsrv.com/doc/thunderbird?rev=1340269653&amp;do=diff</link>
        <description>Thunderbird

An error when configuring address book to an LDAP directroy

There is an error when connecting to an LDAP directory which does not allow to connect to LDAP server. 

The error:

TLS negotiation failure

Solution

From &lt;https://apps.education.ucsb.edu/wiki/Mozilla_Thunderbird/setup&gt;:

Thunderbird 3 has a bug when accessing our directory certificate. Follow these steps to get around it:
Download certificate</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/vimrc?rev=1426445103&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:45:03+00:00</dc:date>
        <title>doc:vimrc</title>
        <link>https://nixsrv.com/doc/vimrc?rev=1426445103&amp;do=diff</link>
        <description>.vimrc

.vimrc

set nocp
syntax enable
set expandtab
set tabstop=4
set shiftwidth=4
colorscheme github
set autoindent
set incsearch
set foldlevel=0
set foldnestmax=1
set foldmethod=indent
set foldignore=
set foldminlines=0
set foldignore=
set nowrap
set ft=python
&quot;set keymap=russian-jcukenwin
set langmap=ФИСВУАПРШОЛДЬТЩЗЙКЫЕГМЦЧНЯЖ;ABCDEFGHIJKLMNOPQRSTUVWXYZ:,фисвуапршолдьтщзйкыегмцчня;abcdefghijklmnopqrstuvwxyz
set nu!
set hidden</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/wordpress_update_via_ssh?rev=1415047257&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2014-11-03T20:40:57+00:00</dc:date>
        <title>doc:wordpress_update_via_ssh</title>
        <link>https://nixsrv.com/doc/wordpress_update_via_ssh?rev=1415047257&amp;do=diff</link>
        <description>#package installation
    sudo apt-get update
    sudo apt-get install libssh2-php
#mysql-settings
    define('DB_NAME', 'wordpress');
    define('DB_USER', 'wordpress');
    define('DB_PASSWORD', 'password');
#make-backup
    mysqldump -u wordpress -ppassword wordpress &gt; /home/user/wodpress.sql
    tar -czvf www.tgz /var/www/
#update-setup
    #wp-user
        sudo adduser wp-user
        cd /var/www
        sudo chown -R wp-user:wp-user /var/www/
    #ssh-keys
        sudo su - wp-user
       …</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/xvfb?rev=1339659201&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2012-06-14T07:33:21+00:00</dc:date>
        <title>doc:xvfb</title>
        <link>https://nixsrv.com/doc/xvfb?rev=1339659201&amp;do=diff</link>
        <description>Run gui program and connect to a headless server using VNC

# install
    aptitude install x11vnc xvfb icewm
# start
    export DISPLAY=:0
    Xvfb :0 -screen 0 1024x768x16 -nolisten tcp &amp;
    x11vnc -display :0 -bg -nopw -listen localhost -xkb -forever &amp;
    icewm &amp;
# connect
    # on a Windows host connect to the server using putty and forward a port
        putty L5900    localhost:5900
    # now connect to 127.0.0.1 using a VNC client</description>
    </item>
    <item rdf:about="https://nixsrv.com/doc/zabbix?rev=1426445658&amp;do=diff">
        <dc:format>text/html</dc:format>
        <dc:date>2015-03-15T18:54:18+00:00</dc:date>
        <title>doc:zabbix</title>
        <link>https://nixsrv.com/doc/zabbix?rev=1426445658&amp;do=diff</link>
        <description>Zabbix cheatsheet

Zabbix agent

# check parameter
    zabbix_get -s 127.0.0.1 -p 10050 -k &quot;psql.tx_commited&quot;
# custom parameters
    # disk subsystem usage, custom multiplier: 0.0009765625
        UserParameter=sda.blk_read, iostat sda | grep sda | awk '{print $5}'
        UserParameter=sda.blk_wrtn, iostat sda | grep sda | awk '{print $6}'
    # PostgreSQL monitoring
        # Total transactions per second
        UserParameter=psql.tx_commited, psql -U postgres -t -c &quot;select sum(xact_commit) …</description>
    </item>
</rdf:RDF>
